<script>
  function enviarFormulario() {
    const nombre = document.getElementById("nombre").value;
    const telefono = document.getElementById("telefono").value;
    const poblacion = document.getElementById("poblacion").value;
    const idboleto = new URLSearchParams(window.location.search).get('id');

    if (!nombre || !telefono || !poblacion || !idboleto) {
      alert("Por favor completa todos los campos.");
      return;
    }

    fetch("https://script.google.com/macros/s/AKfycbykd-_FQAOpWmbxl2yTPWWq_gQNbRcbXH5QkHtoI30DKbc-XTU6GtOaSzynMwSls6RZ/exec", {
      method: "POST",
      mode: "no-cors",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        idboleto: idboleto,
        Nombre: nombre,
        Telefono: telefono,
        Poblacion: poblacion,
        Estado: "Apartado"
      })
    })
    .then(() => {
      alert(`✅ ¡Tu boleto #${idboleto} ha sido apartado correctamente!\nEl administrador revisará tu pago para confirmar.`);
      window.location.href = "panel-boletos-rifa.html";
    })
    .catch(error => {
      console.error("Error:", error);
      alert("❌ Hubo un error al apartar tu boleto. Intenta nuevamente.");
    });
  }
</script>
