<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Panel de Boletos - Rifa</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      background: #f5f5f5;
    }
    header {
      background: #003366;
      color: white;
      padding: 1rem;
      text-align: center;
    }
    .contenedor {
      max-width: 960px;
      margin: auto;
      padding: 1rem;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
      background: white;
    }
    th, td {
      padding: 0.5rem;
      border: 1px solid #ccc;
      text-align: center;
    }
    th {
      background-color: #0066cc;
      color: white;
    }
    tr:nth-child(even) {
      background-color: #f0f8ff;
    }
    input[type="text"] {
      width: 100%;
      padding: 0.5rem;
      margin-top: 1rem;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    .btn {
      background: #ffc107;
      padding: 0.3rem 0.8rem;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .btn:hover {
      background: #ff9800;
    }
    .copiado {
      color: green;
      font-size: 0.9em;
      display: none;
    }
  </style>
</head>
<body>

<header>
  <h1>PANEL DE BOLETOS</h1>
  <p>Visualización y control de la rifa actual</p>
</header>

<div class="contenedor">
  <input type="text" id="busqueda" placeholder="Buscar por nombre, número o teléfono...">

  <table id="tablaBoletos">
    <thead>
      <tr>
        <th>#</th>
        <th>Nombre</th>
        <th>Teléfono</th>
        <th>Número</th>
        <th>Estatus</th>
        <th>Acción</th>
      </tr>
    </thead>
    <tbody id="cuerpoTabla">
      <!-- Se llenará con JavaScript -->
    </tbody>
  </table>
</div>

<script>
  // Simulación de datos (sustituir con datos reales de Google Sheets si se desea)
  const boletos = [
    { nombre: "Miriam Camacho", telefono: "3271234567", numero: 10, pagado: true },
    { nombre: "Carlos Pérez", telefono: "3277654321", numero: 12, pagado: false },
    { nombre: "Jorge López", telefono: "3271122334", numero: 15, pagado: true }
  ];

  const tabla = document.getElementById("cuerpoTabla");

  function renderizarBoletos(datos) {
    tabla.innerHTML = "";
    datos.forEach((b, i) => {
      const fila = document.createElement("tr");
      fila.innerHTML = `
        <td>${i + 1}</td>
        <td>${b.nombre}</td>
        <td>${b.telefono}</td>
        <td>${b.numero}</td>
        <td style="color: ${b.pagado ? 'green' : 'red'};">${b.pagado ? 'Pagado' : 'Pendiente'}</td>
        <td>
          <button class="btn" onclick="copiarWhatsapp('${b.telefono}')">WhatsApp</button>
        </td>
      `;
      tabla.appendChild(fila);
    });
  }

  function copiarWhatsapp(telefono) {
    const enlace = `https://wa.me/52${telefono}`;
    navigator.clipboard.writeText(enlace).then(() => {
      alert("Enlace de WhatsApp copiado.");
    });
  }

  // Buscador
  const inputBusqueda = document.getElementById("busqueda");
  inputBusqueda.addEventListener("input", () => {
    const texto = inputBusqueda.value.toLowerCase();
    const filtrados = boletos.filter(b =>
      b.nombre.toLowerCase().includes(texto) ||
      b.telefono.includes(texto) ||
      b.numero.toString().includes(texto)
    );
    renderizarBoletos(filtrados);
  });

  // Inicial
  renderizarBoletos(boletos);
</script>

</body>
</html>
