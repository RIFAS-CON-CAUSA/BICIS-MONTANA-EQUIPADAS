<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
  import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyC-9BVF6sfbA1IcmawTtxFiwHOyHv0Qa3g",
    authDomain: "rifas-con-causa.firebaseapp.com",
    projectId: "rifas-con-causa",
    storageBucket: "rifas-con-causa.firebasestorage.app",
    messagingSenderId: "347417635634",
    appId: "1:347417635634:web:3ddab8921d26707910452b"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // Referencia global para tu script original
  window.oportunidadesGlobal = [];

  async function cargarBoletos() {
    const querySnapshot = await getDocs(collection(db, "boletos"));
    querySnapshot.forEach((doc) => {
      const data = doc.data();
      if (data.numeros && Array.isArray(data.numeros)) {
        data.numeros.forEach(num => {
          oportunidadesGlobal.push({
            boleto: data.idboleto || doc.id,
            estado: data.estado || "disponible",
            num: num
          });
        });
      }
    });

    // ✅ Surtido aleatorio respetando tu flujo
    oportunidadesGlobal.sort(() => Math.random() - 0.5);

    // ✅ Aquí seguiría tu lógica normal de pintado o interacción
    // (No tocamos tu estructura)

    // ✅ Solo para visualizar en consola que cargaron
    console.log("Boletos cargados:", oportunidadesGlobal);
  }

  cargarBoletos();
</script>
